<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Python高级编程 | 
        
        Kerry
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?yLCpShWWLLMEALkrueHy8A==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body {
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text {
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Kerry">
    <meta name="msapplication-starturl" content="https://yuansuixin.github.io/2017/02/26/python-senior/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Kerry">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://yuansuixin.github.io/2017/02/26/python-senior/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Python高级编程 | Kerry">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="">
    

    
        <meta property="article:published_time" content="Sun Feb 26 2017 21:55:02 GMT+0800">
        <meta property="article:modified_time" content="Thu Apr 26 2018 22:04:49 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://yuansuixin.github.io/2017/02/26/python-senior/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://yuansuixin.github.io/2017/02/26/python-senior/index.html",
    "headline": "Python高级编程",
    "datePublished": "Sun Feb 26 2017 21:55:02 GMT+0800",
    "dateModified": "Thu Apr 26 2018 22:04:49 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "kerry",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "Hi, nice to meet you"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Kerry",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": "",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#星号的用法"><span class="post-toc-number">1.</span> <span class="post-toc-text">星号的用法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#赋值和引用"><span class="post-toc-number">2.</span> <span class="post-toc-text">赋值和引用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#迭代器，生成器"><span class="post-toc-number">3.</span> <span class="post-toc-text">迭代器，生成器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#装饰器"><span class="post-toc-number">4.</span> <span class="post-toc-text">装饰器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#闭包"><span class="post-toc-number">5.</span> <span class="post-toc-text">闭包</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#方法"><span class="post-toc-number">6.</span> <span class="post-toc-text">方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#继承"><span class="post-toc-number">7.</span> <span class="post-toc-text">继承</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#魔术方法"><span class="post-toc-number">8.</span> <span class="post-toc-text">魔术方法</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#垃圾收集"><span class="post-toc-number"></span> <span class="post-toc-text">垃圾收集</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#性能"><span class="post-toc-number"></span> <span class="post-toc-text">性能</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#技巧"><span class="post-toc-number">1.</span> <span class="post-toc-text">技巧</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Python高级编程
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>kerry</strong>
        <span>2月 26, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Python高级编程&url=https://yuansuixin.github.io/2017/02/26/python-senior/index.html&pic=https://yuansuixin.github.io/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Python高级编程&url=https://yuansuixin.github.io/2017/02/26/python-senior/index.html&via=kerry" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://yuansuixin.github.io/2017/02/26/python-senior/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://yuansuixin.github.io/2017/02/26/python-senior/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h3 id="星号的用法"><a href="#星号的用法" class="headerlink" title="星号的用法"></a>星号的用法</h3><ol>
<li><p><code>*</code> 和 <code>**</code> 的用法</p>
<ul>
<li><p>函数定义</p>
<pre><code>def foo(*args, **kwargs):
    pass
</code></pre></li>
<li><p>参数传递</p>
<pre><code>def foo(x, y, z, a, b):
    print(x)
    print(y)
    print(z)
    print(a)
    print(b)
lst = [1, 2, 3]
dic = {&apos;a&apos;: 22, &apos;b&apos;: 77}
foo(*lst, **dic)
</code></pre></li>
<li><p>import <em> 语法,</em>默认是调用的<strong>all</strong>里面的内容，如果<strong>all</strong>里面没有也是调用不了的</p>
<pre><code>from xyz import *

__all__ = (&apos;a&apos;, &apos;e&apos;, &apos;_d&apos;)

a = 123
b = 456
c = &apos;asdfghjkl&apos;
_d = [1,2,3,4,5,6]
e = (9,8,7,6,5,4)
</code></pre></li>
<li><p>强制命名参数，*后面的那个形参必须使用关键字命名，不能使用位置命名</p>
<pre><code>def foo(a, *, b, c=123):
    pass
</code></pre></li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = 123</span><br><span class="line">b = 456</span><br><span class="line">def bar(a,*,b,c=123):</span><br><span class="line">    print(a,b,c)</span><br><span class="line">bar(a,b=333,c=0)</span><br></pre></td></tr></table></figure>
<ul>
<li>解包语法: <code>a, b, *ignored, c = [1, 2, 3, 4, 5, 6, 7]</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">L = [1,2,3,4,5,6,7,8,9,0]</span><br><span class="line"># 将列表中的第一个值赋给a，第二个值赋给b，最后一个值赋给c，其他的都是给ignored</span><br><span class="line">a,b,*ignored,c = L</span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure>
<h3 id="赋值和引用"><a href="#赋值和引用" class="headerlink" title="赋值和引用"></a>赋值和引用</h3><ol>
<li><p>Python 的赋值和引用</p>
<ul>
<li><code>==, is</code>: <code>==</code> 判断的是值, <code>is</code> 判断的是内存地址 (即对象的id)</li>
<li>小整数对象: [-5, 256]，缓存</li>
<li><p><code>copy, deepcopy</code> 的区别</p>
<ul>
<li><code>copy</code>: 只拷贝表层元素</li>
<li><p><code>deepcopy</code>: 在内存中重新创建所有子元素</p>
<p><img src="http://p693ase25.bkt.clouddn.com/Untitled-1-2018424192358.png" alt="Untitled-1-2018424192358"></p>
</li>
</ul>
</li>
<li><p>函数的形式参数为可变的时候，调用的时候不会重新被置空，而是在原来的基础上操作</p>
<pre><code>def extendList(val, lst=[]):
    lst.append(val)
    return lst

list1 = extendList(10)
list2 = extendList(123, [])
list3 = extendList(&apos;a&apos;)
</code></pre></li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">结果：</span><br><span class="line">list1= [10, &apos;a&apos;]</span><br><span class="line">list2= [10, &apos;a&apos;]</span><br><span class="line">list3= [123]</span><br></pre></td></tr></table></figure>
<pre><code>- 浅复制和深复制

        from copy import copy, deepcopy
        from pickle import dumps, loads

        a = [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;]
        b = [a] * 3
        c = copy(b)
        d = deepcopy(b)
        # 第二个参数指的是调用了第几种算法，性能有区别，底层是定义好的
        e = loads(dumps(b, 4))

        b[1].append(999)
        c[1].append(999)
        d[1].append(999)
        e[1].append(999)
</code></pre><p><img src="http://p693ase25.bkt.clouddn.com/Untitled-1-201842419308.png" alt="Untitled-1-201842419308"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">结果</span><br><span class="line">a= [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999, 999]</span><br><span class="line">b= [[&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999, 999], [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999, 999], [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999, 999]]</span><br><span class="line">c= [[&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999, 999], [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999, 999], [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999, 999]]</span><br><span class="line">d= [[&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999], [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999], [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999]]</span><br><span class="line">e= [[&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999], [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999], [&apos;x&apos;, &apos;y&apos;, &apos;z&apos;, 999]]</span><br></pre></td></tr></table></figure>
<ul>
<li>自定义 deepcopy: <code>my_deepcopy = lambda item: loads(dumps(item, 4))</code>，使用自定义的这个深复制比Python自带的这个deepcopy效率要高，虽然说，Python的底层也是这个原理实现的，一般对性能要求高的时候，可以采用自定义的这个。</li>
<li>Python的可变类型：列表，字典（这里的可变不可变指的是内存中）</li>
<li>python的不可变类型：数字，字符串，元组</li>
</ul>
<h3 id="迭代器，生成器"><a href="#迭代器，生成器" class="headerlink" title="迭代器，生成器"></a>迭代器，生成器</h3><ol>
<li><p>迭代器, 生成器</p>
<pre><code>class Range:
    def __init__(self, start, end, step):
        self.start = start - step
        self.end = end
        self.step = step

    def __iter__(self):
        return self

    def __next__(self):
        current = self.start + self.step
        if current &lt; self.end:
            self.start = current
            return current
        else:
            raise StopIteration()
</code></pre><ul>
<li><p>iterator: 任何实现了 <code>__iter__</code> 和 <code>__next__</code> (python2中是 <code>next()</code>) 方法的对象都是迭代器.</p>
<ul>
<li><code>__iter__</code>返回迭代器自身</li>
<li><code>__next__</code> 返回容器中的下一个值</li>
<li>如果容器中没有更多元素, 则抛出StopIteration异常</li>
</ul>
</li>
<li><p>generator: 生成器其实是一种特殊的迭代器, 不需要自定义 <code>__iter__</code> 和 <code>__next__</code></p>
<ul>
<li>生成器函数 (yield)</li>
<li>生成器表达式</li>
</ul>
</li>
<li><p>练习1: 定义一个随机数迭代器, 随机范围为 [1, 50], 最大迭代次数 30</p>
<pre><code>import random

class RandomIter:
    def __init__(self, start, end, times):
        self.start = start
        self.end = end
        self.max_times = times
        self.count = 0

    def __iter__(self):
        return self

    def __next__(self):
        self.count += 1
        if self.count &lt;= self.max_times:
            return random.randint(self.start, self.end)
        else:
            raise StopIteration()
</code></pre></li>
<li><p>练习2: 自定义一个迭代器, 实现斐波那契数列</p>
<pre><code>class Fib:
    def __init__(self, max_value):
        self.prev = 0
        self.curr = 1
        self.max_value = max_value

    def __iter__(self):
        return self

    def __next__(self):
        if self.curr &lt; self.max_value:
            res = self.curr
            self.prev, self.curr = self.curr, self.prev + self.curr
            return res
        else:
            raise StopIteration()
</code></pre></li>
<li><p>练习3: 自定义一个生成器函数, 实现斐波那契数列</p>
<pre><code>def fib(max_value):
    prev = 0
    curr = 1
    while curr &lt; max_value:
        yield curr
        prev, curr = curr, curr + prev
</code></pre></li>
<li><p>迭代器、生成器有什么好处？</p>
<ul>
<li>节省内存</li>
<li>惰性求值</li>
</ul>
</li>
<li><p>itertools</p>
<ul>
<li>无限迭代<ul>
<li><code>count(start=0, step=1)</code>等同于<code>(start + step * i for i in count())</code></li>
<li><code>cycle(iterable)</code></li>
<li><code>repeat(object [,times])</code>创建一个迭代器，重复生成object，times（如果已提供）指定重复计数，如果未提供times，将无止尽返回该对象。</li>
</ul>
</li>
<li>有限迭代<ul>
<li><code>chain(*iterables)</code>将多个迭代器作为参数, 但只返回单个迭代器, 它产生所有参数迭代器的内容, 就好像他们是来自于一个单一的序列<code># chain(&#39;ABC&#39;, &#39;DEF&#39;) --&gt; A B C D E F</code></li>
</ul>
</li>
<li>排列组合<ul>
<li><code>product(*iterables, repeat=1)</code> 笛卡尔积</li>
<li><code>permutations(iterable[, r-length])</code> 全排列</li>
<li><code>combinations(iterable, r-length)</code> 组合</li>
</ul>
</li>
</ul>
</li>
<li><p>各种推导式</p>
<ul>
<li>列表: <code>[i for i in range(5)]</code></li>
<li>字典: <code>{i: i + 3 for i in range(5)}</code></li>
<li>集合: <code>{i for i in range(5)}</code></li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h3><ol>
<li><p>装饰器</p>
<ul>
<li><p>最简装饰器，原理中使用了闭包</p>
<pre><code>def deco(func):
    def wrap(*args, **kwargs):
        return func(*args, **kwargs)
    return wrap

@deco
def foo(a, b):
    return a ** b
</code></pre></li>
<li><p>原理</p>
<ul>
<li>手动执行装饰的过程</li>
</ul>
<ul>
<li>对比被装饰前后的 <code>foo.__name__</code> 和 <code>foo.__doc__</code></li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">def check(func):</span><br><span class="line">    def wrap(x, y):</span><br><span class="line">        return func(x, y)</span><br><span class="line">    return wrap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def bar(x, y):</span><br><span class="line">    &apos;&apos;&apos;this is bar&apos;&apos;&apos;</span><br><span class="line">    return x * y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 手动执行装饰的过程</span><br><span class="line">wrap = check(bar)  # 装饰</span><br><span class="line">print(bar, id(bar))</span><br><span class="line">bar = wrap         # 替换原函数</span><br><span class="line">print(bar, id(bar))</span><br><span class="line">bar(3, 7)          # 执行装饰后的函数</span><br></pre></td></tr></table></figure>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;function bar at 0x0000023AE62D3158&gt; 2451993080152</span><br><span class="line">&lt;function check.&lt;locals&gt;.wrap at 0x0000023AE62D31E0&gt; 2451993080288</span><br></pre></td></tr></table></figure></p>
<p>注意：locals指的是局部变量</p>
<p>查看装饰过程中的变化：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def foo():</span><br><span class="line">    &apos;&apos;&apos;i am foo&apos;&apos;&apos;</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">print(foo.__name__)</span><br><span class="line">print(foo.__doc__)</span><br></pre></td></tr></table></figure>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">foo</span><br><span class="line">i am foo</span><br></pre></td></tr></table></figure></p>
<p>加上装饰器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def deco(func):</span><br><span class="line">    &apos;&apos;&apos;i am deco&apos;&apos;&apos;</span><br><span class="line">    # @wraps(func)</span><br><span class="line">    def wrap(*args, **kwargs):</span><br><span class="line">        &apos;&apos;&apos;i am wrap&apos;&apos;&apos;</span><br><span class="line">        return func(*args, **kwargs)</span><br><span class="line">    return wrap</span><br><span class="line"></span><br><span class="line">@deco</span><br><span class="line">def foo():</span><br><span class="line">    &apos;&apos;&apos;i am foo&apos;&apos;&apos;</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">print(foo.__name__)</span><br><span class="line">print(foo.__doc__)</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wrap</span><br><span class="line">i am wrap</span><br></pre></td></tr></table></figure></p>
<p>装饰器内使用装饰器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from functools import wraps</span><br><span class="line">def deco(func):</span><br><span class="line">    &apos;&apos;&apos;i am deco&apos;&apos;&apos;</span><br><span class="line">    @wraps(func)</span><br><span class="line">    def wrap(*args, **kwargs):</span><br><span class="line">        &apos;&apos;&apos;i am wrap&apos;&apos;&apos;</span><br><span class="line">        return func(*args, **kwargs)</span><br><span class="line">    return wrap</span><br><span class="line"></span><br><span class="line"># 语法糖</span><br><span class="line">@deco</span><br><span class="line">def foo():</span><br><span class="line">    &apos;&apos;&apos;i am foo&apos;&apos;&apos;</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">print(foo.__name__)</span><br><span class="line">print(foo.__doc__)</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">foo</span><br><span class="line">i am foo</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>简单过程</p>
<pre><code>fn = deco(func)
foo = fn
foo(*args, **kwargs)
</code></pre></li>
<li><p>多个装饰器调用过程</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">print(&apos;**************定义多个装饰器**********************&apos;)</span><br><span class="line">def deco1(func):</span><br><span class="line">    print(&apos;enter deco1&apos;)</span><br><span class="line">    def wrap1(*args, **kwargs):</span><br><span class="line">        print(&apos;enter wrap1&apos;)</span><br><span class="line">        print(&apos;Func is: %s&apos; % func.__name__)</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        print(&apos;exit wrap1&apos;)</span><br><span class="line">        return result</span><br><span class="line">    print(&apos;exit deco1&apos;)</span><br><span class="line">    return wrap1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def deco2(func):</span><br><span class="line">    print(&apos;enter deco2&apos;)</span><br><span class="line">    def wrap2(*args, **kwargs):</span><br><span class="line">        print(&apos;enter wrap2&apos;)</span><br><span class="line">        print(&apos;Func is: %s&apos; % func.__name__)</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        print(&apos;exit wrap2&apos;)</span><br><span class="line">        return result</span><br><span class="line">    print(&apos;exit deco2&apos;)</span><br><span class="line">    return wrap2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def deco3(func):</span><br><span class="line">    print(&apos;enter deco3&apos;)</span><br><span class="line">    def wrap3(*args, **kwargs):</span><br><span class="line">        print(&apos;enter wrap3&apos;)</span><br><span class="line">        print(&apos;Func is: %s&apos; % func.__name__)</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        print(&apos;exit wrap3&apos;)</span><br><span class="line">        return result</span><br><span class="line">    print(&apos;exit deco3&apos;)</span><br><span class="line">    return wrap3</span><br><span class="line"></span><br><span class="line">@deco1</span><br><span class="line">@deco2</span><br><span class="line">@deco3</span><br><span class="line">def foo(x, y):</span><br><span class="line">    return x ** y</span><br><span class="line">print(&apos;**************使用多个装饰器**********************&apos;)</span><br><span class="line">res = foo(3, 2)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<p>执行结果:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">**************定义多个装饰器**********************</span><br><span class="line">enter deco3</span><br><span class="line">exit deco3</span><br><span class="line">enter deco2</span><br><span class="line">exit deco2</span><br><span class="line">enter deco1</span><br><span class="line">exit deco1</span><br><span class="line">**************使用多个装饰器**********************</span><br><span class="line">enter wrap1</span><br><span class="line">Func is: wrap2</span><br><span class="line">enter wrap2</span><br><span class="line">Func is: wrap3</span><br><span class="line">enter wrap3</span><br><span class="line">Func is: foo</span><br><span class="line">exit wrap3</span><br><span class="line">exit wrap2</span><br><span class="line">exit wrap1</span><br><span class="line">9</span><br></pre></td></tr></table></figure></p>
<ul>
<li>装饰器定义的时候，就近原则独立完成装饰器的定义，</li>
<li><p>装饰器使用的时候，从距离函数远的开始，一层一层的进入，然后再一层一层的出去</p>
</li>
<li><p>装饰器的过程拆解</p>
<pre><code>deco1(
          deco2(
              deco3(foo)
          )
      )(3, 4)
</code></pre></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def bar(x, y):</span><br><span class="line">    return x ** y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wrap3 = deco3(bar)</span><br><span class="line">wrap2 = deco2(wrap3)</span><br><span class="line">wrap1 = deco1(wrap2)</span><br><span class="line">bar = wrap1</span><br><span class="line">print(&apos;------ define -------&apos;)</span><br><span class="line">res = bar(3, 3)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>带参数的装饰器</p>
<pre><code>def deco(n):
    def wrap1(func):
        def wrap2(*args, **kwargs):
            return func(*args, **kwargs)
        return wrap2
    return wrap1
 #调用过程
 wrap1 = deco(n)
 wrap2 = wrap1(foo)
 foo = wrap2
 foo()
 #单行形式
 check_result(30)(bar)(4,8)
</code></pre></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">def check_result(n):</span><br><span class="line">    # 确保被装饰函数返回值大于等于n</span><br><span class="line">    # deco才是真正的装饰器</span><br><span class="line">    def deco(func):</span><br><span class="line">        def wrap(*args,**kwargs):</span><br><span class="line">            result = func(*args,**kwargs)</span><br><span class="line">            if result &lt; n:</span><br><span class="line">                return n</span><br><span class="line">            else:</span><br><span class="line">                return result</span><br><span class="line">        return wrap</span><br><span class="line">    return deco</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@check_result(30)</span><br><span class="line">def foo(x,y):</span><br><span class="line">    return x*y</span><br><span class="line"></span><br><span class="line">print(foo(3,9))</span><br><span class="line">print(foo(3,11))</span><br></pre></td></tr></table></figure>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">30</span><br><span class="line">33</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>装饰器类和 <code>__call__</code>,能够执行的都是因为有<code>__call__</code>,函数被调用的过程，其实就是<code>__call__</code>被调用的过程，callable（）可调用的</p>
<pre><code>class Deco:
    def __init__(self, func):
        self.func = func

    def __call__(self, *args, **kwargs):
        return self.func(*args, **kwargs)

@Deco
def foo(x, y):
    return x ** y

# 过程拆解
fn = Deco(foo)
foo = fn
foo(12, 34)
</code></pre></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class CheckResult:</span><br><span class="line">    def __init__(self,func):</span><br><span class="line">        self.func = func</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def __call__(self, *args, **kwargs):</span><br><span class="line">        result = self.func(*args, **kwargs)</span><br><span class="line">        if result &gt; 50:</span><br><span class="line">            return result</span><br><span class="line">        else:</span><br><span class="line">            return 50</span><br><span class="line"></span><br><span class="line">@CheckResult</span><br><span class="line">def foo(x,y):</span><br><span class="line">    return x*y</span><br><span class="line"></span><br><span class="line">print(foo,isinstance(foo,CheckResult))  ## True</span><br><span class="line">print(foo(3,9))  ##50</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 过程拆分</span><br><span class="line"># inner = CheckResult(foo)</span><br><span class="line"># foo = inner</span><br><span class="line"># foo(x,y)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>使用场景</p>
<pre><code>* 参数、结果检查
* 缓存、计数
* 日志、统计
* 权限管理
* 重试
* 其他
</code></pre></li>
<li><p>写一个 timer 装饰器, 计算出被装饰函数调用一次花多长时间, 并把时间打印出来</p>
<pre><code>import time
from functools import wraps

def timer(func):
    @wraps(func)  # 修正 docstring
    def wrap(*args, **kwargs):
        time0 = time.time()
        result = func(*args, **kwargs)
        time1 = time.time()
        print(time1 - time0)
        return result
    return wrap
</code></pre></li>
<li><p>写一个 Retry 装饰器,重试</p>
<pre><code>import time

class retry(object):
    def __init__(self, max_retries=3, wait=0, exceptions=(Exception,)):
        self.max_retries = max_retries
        self.exceptions = exceptions
        self.wait = wait

    def __call__(self, f):
        def wrapper(*args, **kwargs):
            for i in range(self.max_retries + 1):
                try:
                    result = f(*args, **kwargs)
                except self.exceptions:
                    time.sleep(self.wait)
                    continue
                else:
                    return result
        return wrapper
</code></pre></li>
</ul>
<hr>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><ul>
<li><p>引用了自由变量的函数即是一个闭包，这个被引用的自由变量和这个函数一同存在，即使已经离开了创造他的环境也不例外，装饰器本身就是一个闭包，但是闭包不一定就是装饰器</p>
</li>
<li><p>说出下面函数返回值</p>
<pre><code>def foo():
    l = []
    def bar(i):
        l.append(i)
        return l
    return bar

f1 = foo()
f2 = foo()

# 说出下列语句执行结果
f1(1)
f1(2)
f2(3)
</code></pre><ul>
<li><p>作用域</p>
<ul>
<li>global 声明全局变量</li>
<li>nonlocal 声明非本层的局部变量</li>
<li>globals() 查看全局变量</li>
<li>locals() 查看局部变量</li>
<li><p>vars() 查看变量，不传参数相当于locals（），传入对象后，会得到<code>object.__dict__</code></p>
<pre><code>local namespace
    |
    V
global namespace
    |
    V
builtin namespace 内置的命名空间
</code></pre></li>
</ul>
</li>
<li><p>更深入一点: <code>__closure__</code>，装饰器中原本的那个函数改变了，那么要想找到原来的那个函数，就需要和这个属性，</p>
</li>
<li>Python中dis.dis(bar)可以查看Python解释器中的语句</li>
</ul>
</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ol>
<li><p><code>method</code>, <code>classmethod</code> 和 <code>staticmethod</code></p>
<ul>
<li><p><code>method</code>: 通过实例调用时, 可以引用类内部的任何属性和方法</p>
</li>
<li><p><code>classmethod</code>: 无需实例化, 可以调用类属性和类方法, 无法取到普通的成员属性和方法</p>
</li>
<li><p><code>staticmethod</code>: 无论用类调用还是用实例调用, 都无法取到类内部的属性和方法, 完全独立的一个方法</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">class Test(object):</span><br><span class="line">    # 类属性</span><br><span class="line">    x = 123</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.y = 456</span><br><span class="line"></span><br><span class="line">    # 实例方法</span><br><span class="line">    def bar1(self):</span><br><span class="line">        print(&apos;i am a method&apos;)</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def bar2(cls):</span><br><span class="line">        print(&apos;i am a classmethod&apos;)</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    def bar3():</span><br><span class="line">        print(&apos;i am a staticmethod&apos;)</span><br><span class="line"></span><br><span class="line">    def foo1(self):  # self当前对象</span><br><span class="line">        print(self.x)</span><br><span class="line">        print(self.y)</span><br><span class="line">        self.bar1()</span><br><span class="line">        self.bar2()</span><br><span class="line">        self.bar3()</span><br><span class="line"></span><br><span class="line">    # 类方法</span><br><span class="line">    @classmethod</span><br><span class="line">    def foo2(cls):  # cls就是类本身</span><br><span class="line">        print(cls.x)</span><br><span class="line">        # print(cls.y) # 通过类取不到实例的属性</span><br><span class="line">        # cls.bar1() # 类调用不到实例方法，cls.bar1(cls())</span><br><span class="line">        Test.bar2()</span><br><span class="line">        Test.bar3()</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    def foo3(obj):</span><br><span class="line">        print(obj.x)</span><br><span class="line">        print(obj.y)</span><br><span class="line">        obj.bar1()</span><br><span class="line">        obj.bar2()</span><br><span class="line">        obj.bar3()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t = Test()</span><br><span class="line"></span><br><span class="line">t.bar1()  # 对象调用实例方法</span><br><span class="line">Test.bar1(t)  # 通过类的方式调用实例方法</span><br><span class="line"></span><br><span class="line">t.foo1()</span><br><span class="line"># i am a method</span><br><span class="line"># i am a method</span><br><span class="line"># 123</span><br><span class="line"># 456</span><br><span class="line"># i am a method</span><br><span class="line"># i am a classmethod</span><br><span class="line"># i am a staticmethod</span><br><span class="line">t.foo2()</span><br><span class="line">t.foo3(t)</span><br></pre></td></tr></table></figure>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><ol>
<li><p>继承、多继承、多态、Mixin、super</p>
<ul>
<li>继承</li>
<li><p>多态，一个对象有多种形态</p>
<pre><code>class Animal:
    pass

class Cat(Animal):
    pass

class Tom(Cat):
    pass

tom = Tom()
isinstance(tom, Cat)
isinstance(tom, Animal)
</code></pre></li>
<li><p>多继承</p>
<ul>
<li><code>Cls.mro()</code></li>
<li><p>菱形继承问题</p>
<pre><code># 继承关系示意
#
#      A.foo()
#    /   \
#   B     C.foo()
#    \   /
#      D
</code></pre></li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Animal:</span><br><span class="line">    def foo(self):</span><br><span class="line">        print(&apos;aaaa&apos;)</span><br><span class="line">class Cat(Animal):</span><br><span class="line">    def foo(self):</span><br><span class="line">        print(&apos;aaaa&apos;)</span><br><span class="line"></span><br><span class="line">class Dog(Animal):</span><br><span class="line">    def foo(self):</span><br><span class="line">        print(&apos;aaaa&apos;)</span><br><span class="line"></span><br><span class="line">class New(Cat,Dog):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">new = New()</span><br><span class="line">new.foo()</span><br><span class="line">print(New.mro()) # 方法继承的顺序</span><br></pre></td></tr></table></figure>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aaaa</span><br><span class="line">[&lt;class &apos;__main__.New&apos;&gt;, &lt;class &apos;__main__.Cat&apos;&gt;, &lt;class &apos;__main__.Dog&apos;&gt;, &lt;class &apos;__main__.Animal&apos;&gt;, &lt;class &apos;object&apos;&gt;]</span><br></pre></td></tr></table></figure></p>
<ul>
<li>Mixin，混入式继承，专门用来为其他类提供功能，只写他需要的功能，通过单纯的Mixin类完成功能的组合</li>
<li><img src="http://p693ase25.bkt.clouddn.com/Untitled-1-201842622313.png" alt="Untitled-1-201842622313"></li>
<li>Super,super是根据继承的顺序执行了，<code>Cls.mro()</code>，这个继承的顺序是根据C3算法得到的，通过距离优先算法去查找</li>
</ul>
<p>手动执行构造函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class A:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&apos;enter A&apos;)</span><br><span class="line">        self.x = 111</span><br><span class="line">        print(&apos;exit A&apos;)</span><br><span class="line"></span><br><span class="line">class B(A):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&apos;enter B&apos;)</span><br><span class="line">        A.__init__(self)</span><br><span class="line">        # super().__init__()</span><br><span class="line">        print(&apos;exit B&apos;)</span><br><span class="line"></span><br><span class="line">class C(A):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&apos;enter C&apos;)</span><br><span class="line">        A.__init__(self)</span><br><span class="line">        # super().__init__()</span><br><span class="line">        print(&apos;exit C&apos;)</span><br><span class="line">class D(B, C):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&apos;enter D&apos;)</span><br><span class="line">        B.__init__(self)</span><br><span class="line">        C.__init__(self)</span><br><span class="line">        # super().__init__()</span><br><span class="line">        print(&apos;exit D&apos;)</span><br><span class="line"></span><br><span class="line">d = D()</span><br></pre></td></tr></table></figure></p>
<p>执行结果：执行了2次A，如果是连接数据库的操作，或者文件操作的时候，就会出现问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">enter D</span><br><span class="line">enter B</span><br><span class="line">enter A</span><br><span class="line">exit A</span><br><span class="line">exit B</span><br><span class="line">enter C</span><br><span class="line">enter A</span><br><span class="line">exit A</span><br><span class="line">exit C</span><br><span class="line">exit D</span><br></pre></td></tr></table></figure></p>
<p>使用super改进：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class A:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&apos;enter A&apos;)</span><br><span class="line">        self.x = 111</span><br><span class="line">        print(&apos;exit A&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class B(A):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&apos;enter B&apos;)</span><br><span class="line">        # A.__init__(self)</span><br><span class="line">        super().__init__()</span><br><span class="line">        print(&apos;exit B&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class C(A):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&apos;enter C&apos;)</span><br><span class="line">        # A.__init__(self)</span><br><span class="line">        super().__init__()</span><br><span class="line">        print(&apos;exit C&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class D(B, C):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&apos;enter D&apos;)</span><br><span class="line">        # B.__init__(self)</span><br><span class="line">        # C.__init__(self)</span><br><span class="line">        super().__init__()</span><br><span class="line">        # super(D,self).__init__()</span><br><span class="line">        print(&apos;exit D&apos;)</span><br><span class="line"></span><br><span class="line">d = D()</span><br></pre></td></tr></table></figure></p>
<p>执行结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">enter D</span><br><span class="line">enter B</span><br><span class="line">enter C</span><br><span class="line">enter A</span><br><span class="line">exit A</span><br><span class="line">exit C</span><br><span class="line">exit B</span><br><span class="line">exit D</span><br></pre></td></tr></table></figure></p>
<h3 id="魔术方法"><a href="#魔术方法" class="headerlink" title="魔术方法"></a>魔术方法</h3><ul>
<li><code>__str__</code>控制对象格式化的输出，对应str(), <code>__repr__</code>有个repr(),一般配合着eval()还原字符串中的内容</li>
<li><strong>repr</strong>和<strong>str</strong>这两个方法都是用于显示的，<strong>str</strong>是面向用户的，而<strong>repr</strong>面向程序员。</li>
</ul>
<p>打印操作会首先尝试<strong>str</strong>和str内置函数(print运行的内部等价形式)，它通常应该返回一个友好的显示。</p>
<p><strong>repr</strong>用于所有其他的环境中：用于交互模式下提示回应以及repr函数，如果没有使用<strong>str</strong>，会使用print和str。它通常应该返回一个编码字符串，可以用来重新创建对象，或者给开发者详细的显示。</p>
<p>当我们想所有环境下都统一显示的话，可以重构<strong>repr</strong>方法；当我们想在不同环境下支持不同的显示，例如终端用户显示使用<strong>str</strong>，而程序员在开发期间则使用底层的<strong>repr</strong>来显示，实际上<strong>str</strong>只是覆盖了<strong>repr</strong>以得到更友好的用户显示。</p>
<ul>
<li><code>__init__</code> 和 <code>__new__</code>，<code>__new__()</code><ul>
<li><code>__new__</code> 返回一个对象的实例, 实例不带有任何的属性，可以动态添加，<code>__init__</code>初始化，无返回值</li>
<li><code>__new__</code> 是一个类方法</li>
<li><code>__init__</code>初始化的数据都保存在<code>__dict__</code>里面</li>
<li>注意在和None进行判断的时候使用is效率更高<ul>
<li>单例模式</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>class A(object):
    &apos;&apos;&apos;单例模式&apos;&apos;&apos;
    obj = None
    def __new__(cls, *args, **kwargs):
        if cls.obj is None:
            cls.obj = object.__new__(cls)
        return cls.obj
</code></pre><ul>
<li><p>比较运算、数学运算</p>
<ul>
<li>update（）方法，在字典中使用，更新</li>
<li><p>运算符重载</p>
<ul>
<li><p><code>+</code>: <code>__add__(value)</code>列表，元组（不同长度的不可以做加法），字符串，int，float类型都可以做加法，集合可以做<code>&amp; | -</code>运算</p>
</li>
<li><p><code>-</code>: <code>__sub__(value)</code></p>
</li>
<li><code>*</code>: <code>__mul__(value)</code>列表，字符串，元组可以相乘</li>
<li><code>/</code>: <code>__truediv__(value)</code> (Python 3.x), <code>__div__(value)</code> (Python 2.x)</li>
<li><code>//</code>: <code>__floordiv__(value)</code>向下取整，math库中的ceil（）向上取整</li>
<li><code>%</code>: <code>__mod__(value)</code></li>
<li><code>&amp;</code>: <code>__and__(value)</code></li>
<li><code>|</code>: <code>__or__(value)</code></li>
</ul>
</li>
</ul>
</li>
<li><p>实现字典的 <code>__add__</code> 方法, 作用相当于 d.update(other)</p>
<pre><code>class Dict(dict):
    def __add__(self, other):
        if isinstance(other, dict):
            new_dict = {}
            new_dict.update(self)
            new_dict.update(other)
            return new_dict
        else:
            raise TypeError(&apos;not a dict&apos;)
</code></pre></li>
</ul>
<ul>
<li>比较运算符的重载<ul>
<li><code>==</code>: <code>__eq__(value)</code></li>
<li><code>!=</code>: <code>__ne__(value)</code></li>
<li><code>&gt;</code>: <code>__gt__(value)</code></li>
<li><code>&gt;=</code>: <code>__ge__(value)</code></li>
<li><code>&lt;</code>: <code>__lt__(value)</code></li>
<li><code>&lt;=</code>: <code>__le__(value)</code></li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">实现数学上无穷大的概念</span><br><span class="line">class Inf:</span><br><span class="line">    def __lt__(self, other):</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">    def __le__(self, other):</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">    def __ge__(self, other):</span><br><span class="line">        return True</span><br><span class="line"></span><br><span class="line">    def __gt__(self, other):</span><br><span class="line">        return True</span><br><span class="line"></span><br><span class="line">    def __eq__(self, other):</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">    def __ne__(self, other):</span><br><span class="line">        return True</span><br></pre></td></tr></table></figure>
<ul>
<li><p>容器方法，列表，元组，字符串，字典，集合都是容器类型，注意所有的不可变的都可以作为字典的key，可变的不可以作为key，因为得不到一个具体的哈希值</p>
<ul>
<li><code>__len__</code> -&gt; len</li>
<li><code>__iter__</code> -&gt; for</li>
<li><code>__contains__</code> -&gt; in</li>
<li><code>__getitem__</code> 对 <code>string, list, tuple, dict</code> 有效，通过【】方括号取值的时候会默认执行，</li>
<li><code>__setitem__</code> 对 <code>list, dict</code> 有效</li>
<li><p><code>__missing__</code> 对 <code>dict</code> 有效, 字典的预留接口, dict 自身并没有实现</p>
<pre><code>class Dict(dict):
    def __missing__(self, key):
        self[key] = None  # 当检查到 Key 缺失时, 可以做任何默认行为
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li>可执行对象: <code>__call__</code></li>
<li>with是一个关键字<ul>
<li><code>__enter__</code> 进入 <code>with</code> 代码块前的准备操作</li>
<li><code>__exit__</code> 退出时的善后操作</li>
<li>打开文件时，有colsed属性，可以查看文件是否关闭了</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class A:</span><br><span class="line">    def __enter__(self):</span><br><span class="line">        print(111,)</span><br><span class="line">    def __exit__(self, exc_type, exc_val, exc_tb):</span><br><span class="line">        print(33333,exc_type, exc_val, exc_tb)</span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line">with A() as a:</span><br><span class="line">    print(222,a)</span><br><span class="line">    # print(222,a[1233]) 报错</span><br></pre></td></tr></table></figure>
<p>执行结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">111</span><br><span class="line">222 None</span><br><span class="line">33333 None None None</span><br></pre></td></tr></table></figure></p>
<p>如果执行错误的，结果就是这样的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">111</span><br><span class="line">33333 &lt;class &apos;TypeError&apos;&gt; &apos;NoneType&apos; object is not subscriptable &lt;traceback object at 0x000001BAFB6C7888&gt;</span><br></pre></td></tr></table></figure></p>
<p>注意：有错误的时候，exit后面的三个参数就会分别打印出错误类型，详细的错误信息，traceback对象，回溯，跟踪错误</p>
<ul>
<li><code>__setattr__, __getattribute__, __getattr__, __dict__</code>对应于<code>setattr(),getattr(),hasattr(),dict(),</code>方法</li>
<li><code>__getattribute__</code>对应着所有的点操作</li>
<li>类的方法属性保存在类的<code>__dict__</code></li>
<li><p><code>__getattr__</code>用来处理取不到属性方法的</p>
<ul>
<li><p>常用来做属性监听，监听属性的变化，钩子</p>
<pre><code>class A:
    &apos;&apos;&apos;TestClass&apos;&apos;&apos;
    z = [7,8,9]
    def __init__(self):
        self.x = 123
        self.y = &apos;abc&apos;

    def __setattr__(self, name, value):
        print(&apos;set %s to %s&apos; % (name, value))
        object.__setattr__(self, name, value)

    def __getattribute__(self, name):
        print(&apos;get %s&apos; % name)
        return object.__getattribute__(self, name)

    def __getattr__(self, name):
        print(&apos;not has %s&apos; % name)
        return -1

    def foo(self, x, y):
        return x ** y

# 对比
a = A()
print(A.__dict__)
print(a.__dict__)
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li><p>槽: <code>__slots__</code></p>
<ul>
<li>固定类所具有的属性</li>
<li>实例不会分配 <code>__dict__</code></li>
<li>实例无法动态添加属性</li>
<li><p>优化内存分配</p>
<pre><code>class A:
    __slots__ = (&apos;x&apos;, &apos;y&apos;)
</code></pre></li>
</ul>
</li>
</ul>
<h2 id="垃圾收集"><a href="#垃圾收集" class="headerlink" title="垃圾收集"></a>垃圾收集</h2><ol>
<li>Garbage Collection (GC)<ul>
<li>引用计数<ul>
<li>优点: 简单、实时性高</li>
<li><img src="http://p693ase25.bkt.clouddn.com/Untitled-1-201842622349.png" alt="Untitled-1-201842622349"></li>
<li>缺点: 消耗资源、循环引用无法处理</li>
</ul>
</li>
<li>标记-清除, 分代收集</li>
</ul>
</li>
</ol>
<pre><code>lst1 = [3, 4]           # lst1-&gt;ref_count 1
lst2 = [8, 9]           # lst2-&gt;ref_count 1

# lst1 -&gt; [3, 4, lst2]
lst1.append(lst2)       # lst2-&gt;ref_count 2

# lst2 -&gt; [8, 9, lst1]
lst2.append(lst1)       # lst1-&gt;ref_count 2

del lst1                # lst1-&gt;ref_count 1
del lst2                # lst2-&gt;ref_count 1
</code></pre><p><img src="http://p693ase25.bkt.clouddn.com/Untitled-1-201842622053.png" alt="Untitled-1-201842622053"></p>
<p>产生垃圾</p>
<p><img src="http://p693ase25.bkt.clouddn.com/Untitled-1-201842622125.png" alt="Untitled-1-201842622125"></p>
<h2 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h2><p>动态语言性能上和静态语言无法抗衡，<br>静态语言：C， C++, GO  C#，Java<br>动态语言：Python，JavaScript，Ruby，PHP，Lua 【脚本语言】</p>
<ol>
<li><p>Python 性能之困</p>
<ol>
<li>计算密集型<ul>
<li>CPU 长时间满负荷运行, 如图像处理、大数据运算、圆周率计算等</li>
<li>计算密集型: 用 C 语言补充</li>
<li>Profile, timeit</li>
</ul>
</li>
<li>I/O 密集型: 网络 IO, 文件 IO, 设备 IO 等<ul>
<li>多任务处理: 进程 / 线程 / 协程</li>
<li>阻塞 -&gt; 非阻塞</li>
<li>同步 -&gt; 异步</li>
</ul>
</li>
<li>GIL 全局解释器锁<ul>
<li>它确保任何时候都只有一个Python线程执行。<br> <img src="http://p693ase25.bkt.clouddn.com/Untitled-1-2018426215848.png" alt="Untitled-1-2018426215848"></li>
</ul>
</li>
<li>什么是进程、线程、协程？<ul>
<li>进程: 资1. 源消耗大, 系统整体开销大, 数据通信不方便</li>
<li>线程: 资源消耗小, 可共享数据。上下文开销大。按时间片强制切换, 不够灵活</li>
<li>协程: 内存开销更小, 上下文切换开销更小。可根据事件切换, 更加有效的利用 CPU，stackless/greenlets/Gevent利用的第三方完成的协成，tornado、asyncio使用Python原生的代码实现的协成，Twisted使用的是回调机制</li>
<li>进程、线程、协程调度的过程叫做上下文切换</li>
</ul>
</li>
<li>什么是同步、异步、阻塞、非阻塞？<ul>
<li>同步, 异步: 客户端调用服务器接口时</li>
<li>阻塞, 非阻塞: 服务端发生等待</li>
<li>同步，是有顺序的，一个接一个的进行</li>
<li>处理并发就是构建异步非阻塞程序</li>
</ul>
</li>
<li>事件驱动 + 多路复用<ul>
<li>轮询: select, poll</li>
<li>事件驱动: epoll 有效轮询</li>
</ul>
</li>
<li><p>greenlet / gevent | tornado / asyncio</p>
<pre><code>import asyncio

async def foo(n):
    for i in range(10):
        print(&apos;wait %s s&apos; % n)
        await asyncio.sleep(n)
    return i

task1 = foo(1)
task2 = foo(1.5)
tasks = [asyncio.ensure_future(task1),
         asyncio.ensure_future(task2)]

loop = asyncio.get_event_loop()
loop.run_until_complete(asyncio.wait(tasks))
</code></pre></li>
<li><p>线程安全, 锁</p>
<ul>
<li>获得锁之后, 一定要释放, 避免死锁</li>
<li>获得锁之后, 执行的语句, 只跟被锁资源有关</li>
<li>区分普通锁 Lock, 可重入锁 RLock</li>
<li>线程之间的数据交互尽量使用 Queue</li>
</ul>
</li>
<li>gevent<ul>
<li>monkey.patch</li>
<li>gevent.sleep 非阻塞式等待</li>
<li>Queue 协程间数据交互, 避免竞争</li>
</ul>
</li>
</ol>
</li>
</ol>
<h3 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h3><ol>
<li><p>一些技巧和误区</p>
<ol>
<li>格式化打印<ul>
<li>json.dumps(data, indent=4, sort_keys=True, ensure_ascii=False)</li>
<li>json 压缩: <code>json.dumps(obj, separators=[&#39;,&#39;,&#39;:&#39;])</code></li>
<li>pprint</li>
</ul>
</li>
<li>确保能取到有效值<ul>
<li><code>d.get(k, default)</code></li>
<li><code>d.setdefault</code></li>
<li><code>defaultdict</code></li>
<li><code>a or b</code> 可以省去很多if判断，短路</li>
<li><code>x = a if foo() else b</code></li>
</ul>
</li>
<li>try…except… 的滥用<ul>
<li>不要把所有东西全都包住, 程序错误需要报出来</li>
<li>使用 <code>try...except</code> 要指明具体错误, <code>try</code> 结构不是用来隐藏错误的, 而是用来有方向的处理错误的</li>
</ul>
</li>
<li><p>利用 dict 做模式匹配</p>
<pre><code>def do1():
    print(&apos;i am do1&apos;)

def do2():
    print(&apos;i am do2&apos;)

def do3():
    print(&apos;i am do3&apos;)

def do4():
    print(&apos;i am do4&apos;)

mapping = {1: do1, 2: do2, 3: do3, 4: do4}
mod = random.randint(1, 10)
func = mapping.get(mod, do4)
func()
</code></pre></li>
<li><p><code>inf, -inf, nan</code></p>
</li>
<li>venv, pyenv, 命名空间<ul>
<li>venv: 创建虚拟环境, 做环境隔离, venv 目录直接放到项目的目录里</li>
<li><a href="https://github.com/pyenv/pyenv-installer" target="_blank" rel="noopener">pyenv</a>: 管理 Python 版本</li>
</ul>
</li>
<li><p>property: 把一个方法属性化</p>
<pre><code>class C(object):
    @property
    def x(self):
        &quot;I am the &apos;x&apos; property.&quot;
        return self._x
    @x.setter
    def x(self, value):
        self._x = value
    @x.deleter
    def x(self):
        del self._x
</code></pre></li>
<li><p>else 子句: <code>if, for, while, try</code></p>
</li>
<li>collections 模块<ul>
<li>defaultdict</li>
<li>OrderedDict</li>
<li>Counter 计数器</li>
<li>namedtuple 根据元组里面的内容定义类</li>
</ul>
</li>
</ol>
</li>
</ol>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/03/02/inner-class/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/02/07/dvd/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="kerry's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        cyss428@163.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/05/">五月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/02/">二月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">一月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/11/">十一月 2017<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/01/">一月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/10/">十月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/06/">六月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/05/">五月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/03/">三月 2015<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2015&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Kerry
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->

<script type="text/ls-javascript" id="Bing-Background-script">
    queue.offer(function(){
        $('body').attr('data-original', 'https://api.i-meto.com/bing?');
    });
</script>


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
